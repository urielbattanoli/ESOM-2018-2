<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>astah* Plug-in 用スニペット集 &mdash; astah* Plug-in 開発チュートリアル 1.2 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="astah* Plug-in 開発チュートリアル 1.2 documentation" href="index.html" />
    <link rel="prev" title="astah* Plug-in SDK コマンド一覧" href="appendixB.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="appendixB.html" title="astah* Plug-in SDK コマンド一覧"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">astah* Plug-in 開発チュートリアル 1.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">astah* Plug-in 用スニペット集</a><ul>
<li><a class="reference internal" href="#astah-api">astah* API用ユーティリティ</a></li>
<li><a class="reference internal" href="#swing">Swingのスニペット集</a></li>
<li><a class="reference internal" href="#id1">メニューの拡張</a></li>
<li><a class="reference internal" href="#id2">拡張ビューの拡張</a></li>
<li><a class="reference internal" href="#drag-and-drop">Drag and Drop拡張</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="appendixB.html"
                        title="previous chapter">astah* Plug-in SDK コマンド一覧</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/snippets.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="astah-plug-in">
<h1>astah* Plug-in 用スニペット集<a class="headerlink" href="#astah-plug-in" title="Permalink to this headline">¶</a></h1>
<div class="section" id="astah-api">
<h2>astah* API用ユーティリティ<a class="headerlink" href="#astah-api" title="Permalink to this headline">¶</a></h2>
<p>astah* のモデルを操作する際に便利なメソッド群</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300</pre></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * パッケージ名は、生成したプラグインのパッケージ名よりも下に移してください。</span>
<span class="cm"> * プラグインのパッケージ名=&gt; com.example</span>
<span class="cm"> *   com.change_vision.astah.extension.plugin =&gt; X</span>
<span class="cm"> *   com.example                              =&gt; O</span>
<span class="cm"> *   com.example.internal                     =&gt; O</span>
<span class="cm"> *   learning                                 =&gt; X</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">internal</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.exception.InvalidEditingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.model.IAttribute</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.model.IClass</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.model.IClassifierTemplateParameter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.model.IElement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.model.IGeneralization</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.model.INamedElement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.model.IOperation</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.model.IPackage</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.model.IParameter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.model.IRealization</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AstahUtils</span> <span class="o">{</span>

  <span class="cm">/**</span>
<span class="cm">   * 対象が所有しているクラスを取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @param owner クラス または パッケージ</span>
<span class="cm">   * @return クラスの場合はネストしているクラス群</span>
<span class="cm">   *         パッケージの場合はパッケージにあるクラス群</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">IClass</span><span class="o">[]</span> <span class="nf">getOwnedClasses</span><span class="o">(</span><span class="n">Object</span> <span class="n">owner</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">owner</span> <span class="k">instanceof</span> <span class="n">IClass</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="o">((</span><span class="n">IClass</span><span class="o">)</span> <span class="n">owner</span><span class="o">).</span><span class="na">getNestedClasses</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">owner</span> <span class="k">instanceof</span> <span class="n">IPackage</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">List</span><span class="o">&lt;</span><span class="n">IClass</span><span class="o">&gt;</span> <span class="n">classes</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">IClass</span><span class="o">&gt;();</span>
      <span class="k">for</span> <span class="o">(</span><span class="n">INamedElement</span> <span class="n">element</span> <span class="o">:</span> <span class="o">((</span><span class="n">IPackage</span><span class="o">)</span> <span class="n">owner</span><span class="o">).</span><span class="na">getOwnedElements</span><span class="o">())</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">element</span> <span class="k">instanceof</span> <span class="n">IClass</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">classes</span><span class="o">.</span><span class="na">add</span><span class="o">((</span><span class="n">IClass</span><span class="o">)</span> <span class="n">element</span><span class="o">);</span>
        <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="n">classes</span><span class="o">.</span><span class="na">toArray</span><span class="o">(</span><span class="k">new</span> <span class="n">IClass</span><span class="o">[</span><span class="n">classes</span><span class="o">.</span><span class="na">size</span><span class="o">()]);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="n">IClass</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * 対象が所有しているクラスのうち、名前を指定して取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @param owner クラス または パッケージ</span>
<span class="cm">   * @param name  名前</span>
<span class="cm">   * @return クラスの場合はネストしているクラスのうち、同名のもの</span>
<span class="cm">   *         パッケージの場合はパッケージにあるクラスのうち、同名のもの</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">IClass</span> <span class="nf">getOwnedClass</span><span class="o">(</span><span class="n">Object</span> <span class="n">owner</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">owner</span> <span class="k">instanceof</span> <span class="n">IClass</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="nf">getNestedClass</span><span class="o">((</span><span class="n">IClass</span><span class="o">)</span> <span class="n">owner</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">owner</span> <span class="k">instanceof</span> <span class="n">IPackage</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="nf">getOwnedElement</span><span class="o">((</span><span class="n">IPackage</span><span class="o">)</span> <span class="n">owner</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">IClass</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>


  <span class="cm">/**</span>
<span class="cm">   * 対象のパッケージが所有しているINamedElementから、名前を指定して取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @param owner パッケージ</span>
<span class="cm">   * @param name  名前</span>
<span class="cm">   * @return 該当するINamedElement</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">INamedElement</span> <span class="nf">getOwnedElement</span><span class="o">(</span><span class="n">IPackage</span> <span class="n">owner</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">getOwnedElement</span><span class="o">(</span><span class="n">owner</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">INamedElement</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * 対象のパッケージが所有しているオブジェクトから、名前と型を指定して取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @param owner       パッケージ</span>
<span class="cm">   * @param name        名前</span>
<span class="cm">   * @param elementType INamedElementの子クラス型</span>
<span class="cm">   * @return 該当するINamedElementの子クラス型</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span> <span class="kd">extends</span> <span class="n">INamedElement</span><span class="o">&gt;</span> <span class="n">T</span> <span class="n">getOwnedElement</span><span class="o">(</span><span class="n">IPackage</span> <span class="n">owner</span><span class="o">,</span>
      <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">elementType</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">INamedElement</span> <span class="n">element</span> <span class="o">:</span> <span class="n">owner</span><span class="o">.</span><span class="na">getOwnedElements</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">element</span><span class="o">.</span><span class="na">getName</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">elementType</span><span class="o">.</span><span class="na">isInstance</span><span class="o">(</span><span class="n">element</span><span class="o">))</span> <span class="o">{</span>
          <span class="k">return</span> <span class="n">elementType</span><span class="o">.</span><span class="na">cast</span><span class="o">(</span><span class="n">element</span><span class="o">);</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * 対象のクラスが所有しているネストクラスから、名前を指定して取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @param owner クラス</span>
<span class="cm">   * @param name  名前</span>
<span class="cm">   * @return 該当するネストクラス</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">IClass</span> <span class="nf">getNestedClass</span><span class="o">(</span><span class="n">IClass</span> <span class="n">owner</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">IClass</span> <span class="n">element</span> <span class="o">:</span> <span class="n">owner</span><span class="o">.</span><span class="na">getNestedClasses</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">element</span><span class="o">.</span><span class="na">getName</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">element</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * 対象のクラスと指定した親クラスの汎化を取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @param owner     クラス</span>
<span class="cm">   * @param superType 親クラス</span>
<span class="cm">   * @return 汎化オブジェクト</span>
<span class="cm">   *         ただし、指定した親クラスが対象のクラスの親でない場合は、nullを返す</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">IGeneralization</span> <span class="nf">getGeneralization</span><span class="o">(</span><span class="n">IClass</span> <span class="n">owner</span><span class="o">,</span>
      <span class="n">IClass</span> <span class="n">superType</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">IGeneralization</span> <span class="n">generalization</span> <span class="o">:</span> <span class="n">owner</span><span class="o">.</span><span class="na">getGeneralizations</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">superType</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">generalization</span><span class="o">.</span><span class="na">getSuperType</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">generalization</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * 対象のクラスと指定した子クラスの汎化を取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @param owner   クラス</span>
<span class="cm">   * @param subType 子クラス</span>
<span class="cm">   * @return 汎化オブジェクト</span>
<span class="cm">   *         ただし、指定した子クラスが対象のクラスの子でない場合は、nullを返す</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">IGeneralization</span> <span class="nf">getSpecialization</span><span class="o">(</span><span class="n">IClass</span> <span class="n">owner</span><span class="o">,</span> <span class="n">IClass</span> <span class="n">subType</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">IGeneralization</span> <span class="n">generalization</span> <span class="o">:</span> <span class="n">owner</span><span class="o">.</span><span class="na">getSpecializations</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">subType</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">generalization</span><span class="o">.</span><span class="na">getSubType</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">generalization</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * 対象のクラスと指定した実現先クラスの実現を取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @param owner    対象のクラス</span>
<span class="cm">   * @param supplier 実現先</span>
<span class="cm">   *</span>
<span class="cm">   * @return 実現</span>
<span class="cm">   *         ただし、指定した実現先クラスが対象のクラスの実現先でない場合は、nullを返す</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">IRealization</span> <span class="nf">getClientRealization</span><span class="o">(</span><span class="n">IClass</span> <span class="n">owner</span><span class="o">,</span>
      <span class="n">IClass</span> <span class="n">supplier</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">IRealization</span> <span class="n">realization</span> <span class="o">:</span> <span class="n">owner</span><span class="o">.</span><span class="na">getClientRealizations</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">supplier</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">realization</span><span class="o">.</span><span class="na">getSupplier</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">realization</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * 対象のクラスと指定した実現元クラスの実現を取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @param owner    対象のクラス</span>
<span class="cm">   * @param client   実現元</span>
<span class="cm">   *</span>
<span class="cm">   * @return 実現</span>
<span class="cm">   *         ただし、指定した実現元クラスが対象のクラスの実現元でない場合は、nullを返す</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">IRealization</span> <span class="nf">getSupplierRealization</span><span class="o">(</span><span class="n">IClass</span> <span class="n">owner</span><span class="o">,</span>
      <span class="n">IClass</span> <span class="n">client</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">IRealization</span> <span class="n">realization</span> <span class="o">:</span> <span class="n">owner</span><span class="o">.</span><span class="na">getSupplierRealizations</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">realization</span><span class="o">.</span><span class="na">getClient</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">realization</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>


  <span class="cm">/**</span>
<span class="cm">   * 対象クラスから指定した名前のテンプレートパラメータを取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @param owner  対象のクラス</span>
<span class="cm">   * @param name   パラメータ名</span>
<span class="cm">   * @return テンプレートパラメータ</span>
<span class="cm">   *         該当の名前のテンプレートパラメータが存在しない場合はnullが返ります。</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">IClassifierTemplateParameter</span> <span class="nf">getTemplateParameter</span><span class="o">(</span>
      <span class="n">IClass</span> <span class="n">owner</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">IClassifierTemplateParameter</span> <span class="n">templateParameter</span> <span class="o">:</span> <span class="n">owner</span>
        <span class="o">.</span><span class="na">getTemplateParameters</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">templateParameter</span><span class="o">.</span><span class="na">getName</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">templateParameter</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * 対象のクラスから指定した名前の属性を取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @param owner 対象のクラス</span>
<span class="cm">   * @param name  属性名</span>
<span class="cm">   * @return 属性</span>
<span class="cm">   *         該当の名前の属性が存在しない場合はnullが返ります。</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">IAttribute</span> <span class="nf">getAttribute</span><span class="o">(</span><span class="n">IClass</span> <span class="n">owner</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">IAttribute</span> <span class="n">attribute</span> <span class="o">:</span> <span class="n">owner</span><span class="o">.</span><span class="na">getAttributes</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">attribute</span><span class="o">.</span><span class="na">getName</span><span class="o">()))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">attribute</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * 対象のクラスから指定した名前の操作を取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @param owner 対象のクラス</span>
<span class="cm">   * @param name  操作名</span>
<span class="cm">   * @return 操作</span>
<span class="cm">   *         該当の名前の操作が存在しない場合はnullが返ります。</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">IOperation</span> <span class="nf">getOperation</span><span class="o">(</span><span class="n">IClass</span> <span class="n">owner</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span>
      <span class="n">Object</span><span class="o">[]</span> <span class="n">parameterTypes</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">IOperation</span> <span class="n">operation</span> <span class="o">:</span> <span class="n">owner</span><span class="o">.</span><span class="na">getOperations</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">operation</span><span class="o">.</span><span class="na">getName</span><span class="o">()))</span> <span class="o">{</span>
        <span class="n">IParameter</span><span class="o">[]</span> <span class="n">parameters</span> <span class="o">=</span> <span class="n">operation</span><span class="o">.</span><span class="na">getParameters</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">matches</span><span class="o">(</span><span class="n">parameters</span><span class="o">,</span> <span class="n">parameterTypes</span><span class="o">))</span> <span class="o">{</span>
          <span class="k">return</span> <span class="n">operation</span><span class="o">;</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * 対象のクラスにインタフェースであるかどうかを設定します。</span>
<span class="cm">   *</span>
<span class="cm">   * @param type 対象のクラス</span>
<span class="cm">   * @param isInterfase インタフェースであるかどうか</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setInterface</span><span class="o">(</span><span class="n">IClass</span> <span class="n">type</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">isInterface</span><span class="o">)</span>
      <span class="kd">throws</span> <span class="n">InvalidEditingException</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">isInterface</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">addStereotype</span><span class="o">(</span><span class="n">type</span><span class="o">,</span> <span class="s">&quot;interface&quot;</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="n">type</span><span class="o">.</span><span class="na">removeStereotype</span><span class="o">(</span><span class="s">&quot;interface&quot;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * 対象の要素にステレオタイプを追加します。</span>
<span class="cm">   * @param element 対象の要素</span>
<span class="cm">   * @param stereotype 追加するステレオタイプ</span>
<span class="cm">   * @return 追加できた場合はtrue</span>
<span class="cm">   *         既に該当するステレオタイプがある場合はfalse</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">addStereotype</span><span class="o">(</span><span class="n">IElement</span> <span class="n">element</span><span class="o">,</span> <span class="n">String</span> <span class="n">stereotype</span><span class="o">)</span>
      <span class="kd">throws</span> <span class="n">InvalidEditingException</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">exists</span> <span class="o">:</span> <span class="n">element</span><span class="o">.</span><span class="na">getStereotypes</span><span class="o">())</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">stereotype</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">exists</span><span class="o">))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">element</span><span class="o">.</span><span class="na">addStereotype</span><span class="o">(</span><span class="n">stereotype</span><span class="o">);</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">matches</span><span class="o">(</span><span class="n">IParameter</span><span class="o">[]</span> <span class="n">parameters</span><span class="o">,</span> <span class="n">Object</span><span class="o">[]</span> <span class="n">parameterTypes</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">parameterTypes</span><span class="o">.</span><span class="na">length</span> <span class="o">!=</span> <span class="n">parameters</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">parameterTypes</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="n">Object</span> <span class="n">type</span> <span class="o">=</span> <span class="n">parameterTypes</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">type</span> <span class="k">instanceof</span> <span class="n">IClass</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">parameters</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">getType</span><span class="o">()))</span> <span class="o">{</span>
          <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
      <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">parameters</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">getTypeExpression</span><span class="o">()))</span> <span class="o">{</span>
          <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>astah* のAPIのハンドリングをまとめたメソッド群</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118</pre></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * パッケージ名は、生成したプラグインのパッケージ名よりも下に移してください。</span>
<span class="cm"> * プラグインのパッケージ名=&gt; com.example</span>
<span class="cm"> *   com.change_vision.astah.extension.plugin =&gt; X</span>
<span class="cm"> *   com.example                              =&gt; O</span>
<span class="cm"> *   com.example.internal                     =&gt; O</span>
<span class="cm"> *   learning                                 =&gt; X</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">internal</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.JFrame</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.change_vision.astah.extension.plugin.util.exception.APIException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.AstahAPI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.editor.BasicModelEditor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.editor.ClassDiagramEditor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.editor.IDiagramEditorFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.editor.IModelEditorFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.exception.InvalidEditingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.exception.InvalidUsingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.model.IClassDiagram</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.project.ProjectAccessor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.view.IDiagramViewManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.view.IViewManager</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * astah* APIを扱いやすいように包んだユーティリティクラスです。</span>
<span class="cm"> * 利用時にインスタンスを作成してください。</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AstahAPIUtils</span> <span class="o">{</span>

  <span class="cm">/**</span>
<span class="cm">   * 図の表示領域を管理するマネージャを返却します。</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="n">IDiagramViewManager</span> <span class="nf">getDiagramViewManager</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">IViewManager</span> <span class="n">viewManager</span> <span class="o">=</span> <span class="n">getViewManager</span><span class="o">();</span>
    <span class="n">IDiagramViewManager</span> <span class="n">diagramViewManager</span> <span class="o">=</span> <span class="n">viewManager</span><span class="o">.</span><span class="na">getDiagramViewManager</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">diagramViewManager</span><span class="o">;</span>
  <span class="o">}</span>


  <span class="cm">/**</span>
<span class="cm">   * クラス図上にあるモデルを編集するためのエディタを取得します。</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="n">ClassDiagramEditor</span> <span class="nf">getClassDiagramEditor</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="k">return</span> <span class="nf">getDiagramEditorFactory</span><span class="o">().</span><span class="na">getClassDiagramEditor</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InvalidUsingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">APIException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * 各図に共通する基本的なモデルを編集するためのエディタを取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @return BasicModelEditor</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="n">BasicModelEditor</span> <span class="nf">getBasicModelEditor</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="k">return</span> <span class="nf">getModelEditorFactory</span><span class="o">().</span><span class="na">getBasicModelEditor</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InvalidEditingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">APIException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * astah*のプロジェクトを扱うためのProjectAccessorを取得します。</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="n">ProjectAccessor</span> <span class="nf">getProjectAccessor</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ProjectAccessor</span> <span class="n">projectAccessor</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">AstahAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="n">AstahAPI</span><span class="o">.</span><span class="na">getAstahAPI</span><span class="o">();</span>
      <span class="n">projectAccessor</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">getProjectAccessor</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">if</span><span class="o">(</span><span class="n">projectAccessor</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="o">(</span><span class="s">&quot;projectAccessor is null.&quot;</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">projectAccessor</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * astah*本体のメインウィンドウに対応するJFrameを取得します。</span>
<span class="cm">   *</span>
<span class="cm">   * @return JFrame</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="n">JFrame</span> <span class="nf">getMainFrame</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">getProjectAccessor</span><span class="o">().</span><span class="na">getViewManager</span><span class="o">().</span><span class="na">getMainFrame</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * 現在実行しているastah*のエディションを取得します。</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getEdition</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nf">getProjectAccessor</span><span class="o">().</span><span class="na">getAstahEdition</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="n">IViewManager</span> <span class="nf">getViewManager</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ProjectAccessor</span> <span class="n">projectAccessor</span> <span class="o">=</span> <span class="n">getProjectAccessor</span><span class="o">();</span>
    <span class="n">IViewManager</span> <span class="n">viewManager</span> <span class="o">=</span> <span class="n">projectAccessor</span><span class="o">.</span><span class="na">getViewManager</span><span class="o">();</span>
    <span class="k">if</span><span class="o">(</span><span class="n">viewManager</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="o">(</span><span class="s">&quot;ViewManager is null.&quot;</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">viewManager</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="n">IModelEditorFactory</span> <span class="nf">getModelEditorFactory</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ProjectAccessor</span> <span class="n">projectAccessor</span> <span class="o">=</span> <span class="n">getProjectAccessor</span><span class="o">();</span>
    <span class="n">IModelEditorFactory</span> <span class="n">modelEditorFactory</span> <span class="o">=</span> <span class="n">projectAccessor</span><span class="o">.</span><span class="na">getModelEditorFactory</span><span class="o">();</span>
    <span class="k">if</span><span class="o">(</span><span class="n">modelEditorFactory</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="o">(</span><span class="s">&quot;modelEditorFactory is null.&quot;</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">modelEditorFactory</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="n">IDiagramEditorFactory</span> <span class="nf">getDiagramEditorFactory</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">ProjectAccessor</span> <span class="n">projectAccessor</span> <span class="o">=</span> <span class="n">getProjectAccessor</span><span class="o">();</span>
    <span class="n">IDiagramEditorFactory</span> <span class="n">diagramEditorFactory</span> <span class="o">=</span> <span class="n">projectAccessor</span><span class="o">.</span><span class="na">getDiagramEditorFactory</span><span class="o">();</span>
    <span class="k">if</span><span class="o">(</span><span class="n">diagramEditorFactory</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="o">(</span><span class="s">&quot;diagramEditorFactory is null.&quot;</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">diagramEditorFactory</span><span class="o">;</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="swing">
<h2>Swingのスニペット集<a class="headerlink" href="#swing" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://terai.xrea.jp/Swing.html">Java Swingのサンプル</a></p>
</div>
<div class="section" id="id1">
<h2>メニューの拡張<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>詳細はチュートリアル、または同梱されているtutorialexampleプロジェクトを参照してください。</p>
<p>plugin.xmlの例</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;extension</span> <span class="na">point=</span><span class="s">&quot;com.change_vision.astah.ui.actionSets&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;actionSet</span>
      <span class="na">label=</span><span class="s">&quot;%action_set_label&quot;</span>
      <span class="na">visible=</span><span class="s">&quot;true&quot;</span>
      <span class="na">id=</span><span class="s">&quot;com.example.helloworld.actionSet&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;menu</span>
        <span class="na">id=</span><span class="s">&quot;helloworld&quot;</span>
        <span class="na">label=</span><span class="s">&quot;%menu_group&quot;</span>
        <span class="na">path=</span><span class="s">&quot;tool/helloworld&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/menu&gt;</span>
      <span class="nt">&lt;action</span>
        <span class="na">label=</span><span class="s">&quot;%menu_label&quot;</span>
        <span class="na">icon=</span><span class="s">&quot;icons/sample.gif&quot;</span>
        <span class="na">class=</span><span class="s">&quot;com.example.actions.HelloWorldAction&quot;</span>
        <span class="na">tooltip=</span><span class="s">&quot;%menu_tooltip&quot;</span>
        <span class="na">menubarPath=</span><span class="s">&quot;tool/helloworld/&quot;</span>
        <span class="na">id=</span><span class="s">&quot;com.example.actions.HelloWorldAction&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;/action&gt;</span>
    <span class="nt">&lt;/actionSet&gt;</span>
  <span class="nt">&lt;/extension&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</pre></div>
</td></tr></table></div>
<p>アクションの例</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * パッケージ名は、生成したプラグインのパッケージ名よりも下に移してください。</span>
<span class="cm"> * プラグインのパッケージ名=&gt; com.example</span>
<span class="cm"> *   com.change_vision.astah.extension.plugin =&gt; X</span>
<span class="cm"> *   com.example                              =&gt; O</span>
<span class="cm"> *   com.example.internal                     =&gt; O</span>
<span class="cm"> *   learning                                 =&gt; X</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">actions</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.JOptionPane</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.ui.IPluginActionDelegate</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.ui.IWindow</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorldAction</span> <span class="kd">implements</span> <span class="n">IPluginActionDelegate</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="n">Object</span> <span class="nf">run</span><span class="o">(</span><span class="n">IWindow</span> <span class="n">window</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">UnExpectedException</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">JOptionPane</span><span class="o">.</span><span class="na">showMessageDialog</span><span class="o">(</span><span class="n">window</span><span class="o">.</span><span class="na">getParent</span><span class="o">(),</span> <span class="s">&quot;Hello World&quot;</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">JOptionPane</span><span class="o">.</span><span class="na">showMessageDialog</span><span class="o">(</span><span class="n">window</span><span class="o">.</span><span class="na">getParent</span><span class="o">(),</span>
          <span class="s">&quot;Exception occured&quot;</span><span class="o">,</span> <span class="s">&quot;Alert&quot;</span><span class="o">,</span> <span class="n">JOptionPane</span><span class="o">.</span><span class="na">ERROR_MESSAGE</span><span class="o">);</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">UnExpectedException</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id2">
<h2>拡張ビューの拡張<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>詳細はチュートリアル、または同梱されているtutorialexampleプロジェクトを参照してください。</p>
<p>plugin.xmlの例</p>
<div class="highlight-xml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;extension</span> <span class="na">point=</span><span class="s">&quot;com.change_vision.astah.ui.view&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;view</span>
      <span class="na">id=</span><span class="s">&quot;com.example.internal.HelloWorldView&quot;</span>
      <span class="na">type=</span><span class="s">&quot;extraTab&quot;</span>
      <span class="na">class=</span><span class="s">&quot;com.example.internal.HelloWorldView&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/extension&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</pre></div>
</td></tr></table></div>
<p>ビューの例</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90</pre></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * パッケージ名は、生成したプラグインのパッケージ名よりも下に移してください。</span>
<span class="cm"> * プラグインのパッケージ名=&gt; com.example</span>
<span class="cm"> *   com.change_vision.astah.extension.plugin =&gt; X</span>
<span class="cm"> *   com.example                              =&gt; O</span>
<span class="cm"> *   com.example.internal                     =&gt; O</span>
<span class="cm"> *   learning                                 =&gt; X</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">internal</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.awt.BorderLayout</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.Component</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.Container</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.swing.JLabel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.JPanel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.JScrollPane</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.AstahAPI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.project.ProjectAccessor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.project.ProjectEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.project.ProjectEventListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.ui.IPluginExtraTabView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.ui.ISelectionListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloWorldView</span> <span class="kd">extends</span> <span class="n">JPanel</span>
      <span class="kd">implements</span> <span class="n">IPluginExtraTabView</span><span class="o">,</span> <span class="n">ProjectEventListener</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="nf">HelloWorldView</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">initComponents</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initComponents</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="n">BorderLayout</span><span class="o">());</span>
    <span class="n">add</span><span class="o">(</span><span class="n">createLabelPane</span><span class="o">(),</span> <span class="n">BorderLayout</span><span class="o">.</span><span class="na">CENTER</span><span class="o">);</span>
    <span class="n">addProjectEventListener</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">addProjectEventListener</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="n">AstahAPI</span> <span class="n">api</span> <span class="o">=</span> <span class="n">AstahAPI</span><span class="o">.</span><span class="na">getAstahAPI</span><span class="o">();</span>
    <span class="n">ProjectAccessor</span> <span class="n">projectAccessor</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="na">getProjectAccessor</span><span class="o">();</span>
    <span class="n">projectAccessor</span><span class="o">.</span><span class="na">addProjectEventListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">();</span>
  <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="n">Container</span> <span class="nf">createLabelPane</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">JLabel</span> <span class="n">label</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JLabel</span><span class="o">(</span><span class="s">&quot;hello world&quot;</span><span class="o">);</span>
    <span class="n">JScrollPane</span> <span class="n">pane</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JScrollPane</span><span class="o">(</span><span class="n">label</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">pane</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">projectChanged</span><span class="o">(</span><span class="n">ProjectEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">projectClosed</span><span class="o">(</span><span class="n">ProjectEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">}</span>

   <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">projectOpened</span><span class="o">(</span><span class="n">ProjectEvent</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addSelectionListener</span><span class="o">(</span><span class="n">ISelectionListener</span> <span class="n">listener</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Component</span> <span class="nf">getComponent</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getDescription</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">&quot;Show Hello World here&quot;</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">&quot;Hello World View&quot;</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">activated</span><span class="o">()</span> <span class="o">{</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deactivated</span><span class="o">()</span> <span class="o">{</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="drag-and-drop">
<h2>Drag and Drop拡張<a class="headerlink" href="#drag-and-drop" title="Permalink to this headline">¶</a></h2>
<p>同梱されているcom.change_vision.astah.extension.plugin.drag_and_drop_exampleプロジェクトを参照してください。</p>
<p>プラグインの初期化時にDropTargetListenerを追加するため、Activator#start(BundleContext context)を実装する</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.osgi.framework.BundleActivator</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.osgi.framework.BundleContext</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.example.internal.ClassDiagramDropExtension</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.example.internal.util.AstahAPIUtils</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.view.IDiagramViewManager</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Activator</span> <span class="kd">implements</span> <span class="n">BundleActivator</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="n">AstahAPIUtils</span> <span class="n">utils</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AstahAPIUtils</span><span class="o">();</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">start</span><span class="o">(</span><span class="n">BundleContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ClassDiagramDropExtension</span> <span class="n">diagramDropTargetListener</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassDiagramDropExtension</span><span class="o">();</span>
    <span class="n">IDiagramViewManager</span> <span class="n">diagramViewManager</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="na">getDiagramViewManager</span><span class="o">();</span>
    <span class="n">diagramViewManager</span><span class="o">.</span><span class="na">addDropTargetListener</span><span class="o">(</span><span class="n">diagramDropTargetListener</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stop</span><span class="o">(</span><span class="n">BundleContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>DropTargetListenerの実装例</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89</pre></div></td><td class="code"><div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * パッケージ名は、生成したプラグインのパッケージ名よりも下に移してください。</span>
<span class="cm"> * プラグインのパッケージ名=&gt; com.example</span>
<span class="cm"> *   com.change_vision.astah.extension.plugin =&gt; X</span>
<span class="cm"> *   com.example                              =&gt; O</span>
<span class="cm"> *   com.example.internal                     =&gt; O</span>
<span class="cm"> *   learning                                 =&gt; X</span>
<span class="cm"> */</span>
<span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">example</span><span class="o">.</span><span class="na">internal</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.awt.datatransfer.DataFlavor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.datatransfer.Transferable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.dnd.DnDConstants</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.dnd.DropTargetDragEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.dnd.DropTargetDropEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.dnd.DropTargetEvent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Set</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.model.IClassDiagram</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.change_vision.jude.api.inf.view.DiagramDropTargetListener</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">ClassDiagramDropExtension</span> <span class="kd">extends</span> <span class="n">DiagramDropTargetListener</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nf">ClassDiagramDropExtension</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">IClassDiagram</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">dropExternalData</span><span class="o">(</span><span class="n">DropTargetDropEvent</span> <span class="n">dtde</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">dtde</span><span class="o">.</span><span class="na">isLocalTransfer</span><span class="o">())</span> <span class="k">return</span><span class="o">;</span>

    <span class="k">if</span><span class="o">(</span><span class="n">dtde</span><span class="o">.</span><span class="na">isDataFlavorSupported</span><span class="o">(</span><span class="n">DataFlavor</span><span class="o">.</span><span class="na">stringFlavor</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;ClassDiagramDropExtension.stringFlavor&quot;</span> <span class="o">+</span> <span class="n">getURLStringFromDropContent</span><span class="o">(</span><span class="n">dtde</span><span class="o">));</span>
      <span class="n">dtde</span><span class="o">.</span><span class="na">dropComplete</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">dtde</span><span class="o">.</span><span class="na">isDataFlavorSupported</span><span class="o">(</span><span class="n">DataFlavor</span><span class="o">.</span><span class="na">javaFileListFlavor</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">List</span><span class="o">&lt;</span><span class="n">File</span><span class="o">&gt;</span> <span class="n">files</span> <span class="o">=</span> <span class="n">getFilesFromDropContent</span><span class="o">(</span><span class="n">dtde</span><span class="o">);</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;javaFileListFravor&quot;</span> <span class="o">+</span> <span class="n">files</span><span class="o">);</span>
      <span class="n">dtde</span><span class="o">.</span><span class="na">dropComplete</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="n">String</span> <span class="nf">getURLStringFromDropContent</span><span class="o">(</span><span class="n">DropTargetDropEvent</span> <span class="n">dtde</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dtde</span><span class="o">.</span><span class="na">acceptDrop</span><span class="o">(</span><span class="n">DnDConstants</span><span class="o">.</span><span class="na">ACTION_LINK</span><span class="o">);</span>
    <span class="n">Transferable</span> <span class="n">target</span> <span class="o">=</span> <span class="n">dtde</span><span class="o">.</span><span class="na">getTransferable</span><span class="o">();</span>

    <span class="n">String</span> <span class="n">urlString</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">urlString</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span><span class="n">target</span><span class="o">.</span><span class="na">getTransferData</span><span class="o">(</span><span class="n">DataFlavor</span><span class="o">.</span><span class="na">stringFlavor</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">urlString</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">urlString</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">&quot;unchecked&quot;</span><span class="o">)</span>
  <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">File</span><span class="o">&gt;</span> <span class="nf">getFilesFromDropContent</span><span class="o">(</span><span class="n">DropTargetDropEvent</span> <span class="n">dtde</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">dtde</span><span class="o">.</span><span class="na">acceptDrop</span><span class="o">(</span><span class="n">DnDConstants</span><span class="o">.</span><span class="na">ACTION_COPY</span><span class="o">);</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">File</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">list</span> <span class="o">=</span> <span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">File</span><span class="o">&gt;)</span> <span class="n">dtde</span><span class="o">.</span><span class="na">getTransferable</span><span class="o">().</span><span class="na">getTransferData</span><span class="o">(</span><span class="n">DataFlavor</span><span class="o">.</span><span class="na">javaFileListFlavor</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">File</span><span class="o">&gt;();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">dropModels</span><span class="o">(</span><span class="n">DropTargetDropEvent</span> <span class="n">dtde</span><span class="o">,</span> <span class="n">Set</span><span class="o">&lt;?&gt;</span> <span class="n">models</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">dragEnter</span><span class="o">(</span><span class="n">DropTargetDragEvent</span> <span class="n">dtde</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">dragExit</span><span class="o">(</span><span class="n">DropTargetEvent</span> <span class="n">dte</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">dragOver</span><span class="o">(</span><span class="n">DropTargetDragEvent</span> <span class="n">dtde</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">dropActionChanged</span><span class="o">(</span><span class="n">DropTargetDragEvent</span> <span class="n">dtde</span><span class="o">)</span> <span class="o">{</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="appendixB.html" title="astah* Plug-in SDK コマンド一覧"
             >previous</a> |</li>
        <li><a href="index.html">astah* Plug-in 開発チュートリアル 1.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Change Vision,inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>